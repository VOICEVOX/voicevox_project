# リリース戦略

VOICEVOX全体でのリリース戦略を紹介します。
製品としての戦略ではなく、GitHub上で問題なくリリースするために行っている段取りなどを紹介しています。

一言でいうと、日時が決まっているリリースとそうでないリリースを分け、日時が決まっていないリリースで挙動を変更し、日時が決まっているリリースでは挙動の変更を最小限にします。

## 背景

VOICEVOXのアップデートは２種類あります。
１つがキャラクター追加で、こちらはキャラクター権利者の方と打ち合わせの上、予め決めた日程でリリースします。
もう１つがアプリケーションの機能追加で、こちらはでき次第リリースすれば良いことが多く比較的のんびりリリースできます。

以前はこれらのアップデートを同タイミングで実行していましたが、機能追加にバグがあったり、ビルドがなかなか通らなかったりと様々な問題が発生したため、リリース方法を考える必要がありました。

なので、機能追加リリースとキャラ追加リリースを分けています。

## 機能追加リリース

機能追加リリースではキャラクター追加は行わず、機能やバグ修正のみを行います。
リリース時にマイナーバージョンを上げ、対応するreleaseブランチを作成します。
（ブランチ戦略の詳細は[ブランチ戦略](./ブランチ戦略.md#releaseブランチ)を参照）

スケジュールはまちまちですが、大体リリース予定日の１週間～２週間前にプレビュー版（β版）リリースを作成したあと、テスターの方を募集して様々な環境で動くか・不具合がないかを集め、それらの修正を行った後に実際にリリースします。

リリース後に不具合が発覚した場合はhotfixしてパッチバージョンを上げます。どうしても不具合修正が難しければrevertや機能削減を行います。

## キャラクター追加リリース

キャラクター追加リリースでは機能追加は行わず、キャラ追加やバグ修正のみを行います。
対応するreleaseブランチにcommitし、リリース時にパッチバージョンを上げます。

リリース予定日の前日からビルドし始め、予定時刻になり次第ホームページやツイッターを更新して告知します。

